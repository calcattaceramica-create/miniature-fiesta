# دليل اختبار رسائل Flash - Flash Messages Testing Guide

## ملخص التحديثات
تم تحديث **71 رسالة Flash** في 3 ملفات Routes لاستخدام نظام الترجمة:
- **app/inventory/routes.py**: 34 رسالة
- **app/sales/routes.py**: 24 رسالة
- **app/purchases/routes.py**: 13 رسالة

## كيفية الاختبار

### 1. تشغيل التطبيق
```bash
python run.py
```

### 2. اختبار المخزون (34 رسالة)

#### إضافة منتج:
- **الإجراء**: أضف منتج جديد
- **الرسالة المتوقعة**: "تم إضافة المنتج بنجاح" / "Product added successfully"

#### كود مكرر:
- **الإجراء**: أضف منتج بكود موجود
- **الرسالة المتوقعة**: "كود المنتج X موجود مسبقاً للمنتج: Y"

#### حذف منتج مرتبط:
- **الإجراء**: احذف منتج له فواتير
- **الرسالة المتوقعة**: "لا يمكن حذف المنتج لأنه مرتبط بـ: ..."

#### إضافة تصنيف:
- **الإجراء**: أضف تصنيف جديد
- **الرسالة المتوقعة**: "تم إضافة التصنيف بنجاح"

#### حذف تصنيف به منتجات:
- **الإجراء**: احذف تصنيف يحتوي منتجات
- **الرسالة المتوقعة**: "لا يمكن حذف التصنيف لأنه يحتوي على منتجات"

#### إضافة مستودع:
- **الإجراء**: أضف مستودع جديد
- **الرسالة المتوقعة**: "تم إضافة المستودع بنجاح"

#### نقل مخزون:
- **الإجراء**: انقل مخزون لنفس المستودع
- **الرسالة المتوقعة**: "لا يمكن النقل إلى نفس المستودع"

### 3. اختبار المبيعات (24 رسالة)

#### إضافة عميل:
- **الإجراء**: أضف عميل جديد
- **الرسالة المتوقعة**: "تم إضافة العميل بنجاح"

#### إضافة فاتورة:
- **الإجراء**: أنشئ فاتورة جديدة
- **الرسالة المتوقعة**: "تم إضافة الفاتورة بنجاح"

#### تأكيد فاتورة:
- **الإجراء**: أكد فاتورة
- **الرسالة المتوقعة**: "تم تأكيد الفاتورة بنجاح" + "تم إنشاء القيد المحاسبي رقم X"

#### حذف فاتورة مؤكدة:
- **الإجراء**: احذف فاتورة مؤكدة
- **الرسالة المتوقعة**: "لا يمكن حذف فاتورة مؤكدة"

#### منتج غير موجود:
- **الإجراء**: أكد فاتورة بمنتج غير موجود
- **الرسالة المتوقعة**: "المنتج X غير موجود في المستودع"

#### كمية غير كافية:
- **الإجراء**: أكد فاتورة بكمية أكبر من المتاح
- **الرسالة المتوقعة**: "الكمية المتاحة من X غير كافية. المتاح: Y"

#### إضافة عرض سعر:
- **الإجراء**: أضف عرض سعر
- **الرسالة المتوقعة**: "تم إضافة عرض السعر بنجاح"

#### تحويل عرض سعر:
- **الإجراء**: حول عرض سعر لفاتورة
- **الرسالة المتوقعة**: "تم تحويل عرض السعر إلى فاتورة بنجاح"

#### حذف عرض مقبول:
- **الإجراء**: احذف عرض سعر مقبول
- **الرسالة المتوقعة**: "لا يمكن حذف عرض سعر مقبول"

### 4. اختبار المشتريات (13 رسالة)

#### إضافة مورد:
- **الإجراء**: أضف مورد جديد
- **الرسالة المتوقعة**: "تم إضافة المورد بنجاح"

#### إضافة فاتورة شراء:
- **الإجراء**: أنشئ فاتورة شراء
- **الرسالة المتوقعة**: "تم إضافة فاتورة الشراء بنجاح"

#### تأكيد فاتورة شراء:
- **الإجراء**: أكد فاتورة شراء
- **الرسالة المتوقعة**: "تم تأكيد فاتورة الشراء بنجاح" + "تم إنشاء القيد المحاسبي رقم X"

#### إلغاء فاتورة شراء:
- **الإجراء**: ألغِ فاتورة شراء
- **الرسالة المتوقعة**: "تم إلغاء فاتورة الشراء بنجاح"

#### حذف فاتورة مؤكدة:
- **الإجراء**: احذف فاتورة مؤكدة
- **الرسالة المتوقعة**: "لا يمكن حذف فاتورة مؤكدة. يمكنك إلغاؤها فقط."

### 5. اختبار تبديل اللغة

1. سجل الدخول بحساب المدير
2. اذهب إلى: **الإعدادات > اللغة**
3. غير اللغة إلى "English"
4. كرر أي من الاختبارات أعلاه
5. **النتيجة المتوقعة**: جميع الرسائل تظهر بالإنجليزية

### 6. قائمة التحقق

- [ ] جميع رسائل المخزون (34) تعمل بالعربية
- [ ] جميع رسائل المخزون (34) تعمل بالإنجليزية
- [ ] جميع رسائل المبيعات (24) تعمل بالعربية
- [ ] جميع رسائل المبيعات (24) تعمل بالإنجليزية
- [ ] جميع رسائل المشتريات (13) تعمل بالعربية
- [ ] جميع رسائل المشتريات (13) تعمل بالإنجليزية
- [ ] المتغيرات تظهر بشكل صحيح في الرسائل
- [ ] تبديل اللغة يعمل فوراً

### 7. إعادة تجميع الترجمات (إذا لزم الأمر)

```bash
venv\Scripts\pybabel.exe compile -d translations
```

---

**إجمالي الرسائل المختبرة**: 71 رسالة
**الملفات المحدثة**: 3 ملفات Routes + 1 ملف ترجمة
**تاريخ التحديث**: 2026-01-14

