# تعليمات تشغيل خادم DED ERP

## طرق تشغيل الخادم

### 1. التشغيل العادي (موصى به)
انقر نقراً مزدوجاً على ملف:
```
start_server.bat
```

**المميزات:**
- ✅ يعمل بخادم Waitress الإنتاجي (أكثر استقراراً)
- ✅ يمكنك رؤية رسائل الخادم والأخطاء
- ✅ يمكنك إيقافه بالضغط على `Ctrl+C`

**العيوب:**
- ❌ يجب إبقاء النافذة مفتوحة
- ❌ إذا أغلقت النافذة، سيتوقف الخادم

---

### 2. التشغيل في الخلفية
انقر نقراً مزدوجاً على ملف:
```
start_server_background.bat
```

**المميزات:**
- ✅ يعمل في الخلفية (لا حاجة لإبقاء النافذة مفتوحة)
- ✅ يستمر في العمل حتى بعد إغلاق النافذة

**العيوب:**
- ❌ لا يمكنك رؤية رسائل الخادم
- ❌ يجب استخدام `stop_server.bat` لإيقافه

**لإيقاف الخادم:**
انقر نقراً مزدوجاً على ملف:
```
stop_server.bat
```

---

### 3. التشغيل اليدوي (للمطورين)

#### أ) خادم التطوير (Flask Development Server):
```bash
python run.py
```

#### ب) خادم الإنتاج (Waitress):
```bash
python run_production.py
```

---

## معلومات الوصول

- **عنوان URL:** http://localhost:5000 أو http://127.0.0.1:5000
- **اسم المستخدم:** admin
- **كلمة المرور:** admin123

---

## الفرق بين خادم التطوير وخادم الإنتاج

### خادم التطوير (Flask Development Server)
- ✅ سهل الاستخدام
- ✅ يعيد التحميل تلقائياً عند تغيير الكود
- ❌ **غير آمن للاستخدام الإنتاجي**
- ❌ بطيء في معالجة الطلبات المتعددة
- ❌ قد يتوقف عند حدوث أخطاء

### خادم الإنتاج (Waitress)
- ✅ **آمن للاستخدام الإنتاجي**
- ✅ سريع في معالجة الطلبات المتعددة
- ✅ أكثر استقراراً
- ✅ يتعامل مع الأخطاء بشكل أفضل
- ❌ لا يعيد التحميل تلقائياً عند تغيير الكود

---

## حل المشاكل الشائعة

### المشكلة: "Port 5000 is already in use"
**الحل:**
1. أوقف الخادم الحالي باستخدام `stop_server.bat`
2. أو غير المنفذ في ملف `run_production.py`

### المشكلة: "Cannot connect to server"
**الحل:**
1. تأكد من أن الخادم يعمل
2. تحقق من جدار الحماية (Firewall)
3. جرب استخدام `http://127.0.0.1:5000` بدلاً من `localhost`

### المشكلة: الخادم يتوقف تلقائياً
**الحل:**
1. استخدم `start_server.bat` بدلاً من `run.py`
2. تحقق من رسائل الأخطاء في النافذة
3. تأكد من أن جميع المكتبات مثبتة: `pip install -r requirements.txt`

---

## ملاحظات مهمة

1. **لا تغلق نافذة الخادم** إذا كنت تستخدم `start_server.bat`
2. **استخدم `stop_server.bat`** لإيقاف الخادم الذي يعمل في الخلفية
3. **للاستخدام الإنتاجي**، استخدم دائماً `start_server.bat` أو `start_server_background.bat`
4. **للتطوير**، يمكنك استخدام `python run.py` لإعادة التحميل التلقائي

---

## التحديثات المستقبلية

إذا قمت بتحديث الكود:
1. أوقف الخادم
2. قم بتحديث الملفات
3. شغل الخادم مرة أخرى

إذا قمت بتحديث قاعدة البيانات:
```bash
flask db upgrade
```

---

**تم إنشاء هذا الملف بواسطة Augment AI**

