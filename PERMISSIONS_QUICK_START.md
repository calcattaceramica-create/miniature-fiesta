# ุฏููู ุงูุจุฏุก ุงูุณุฑูุน ููุธุงู ุงูุตูุงุญูุงุช

## ๐ ุงูุจุฏุก ุงูุณุฑูุน

### 1. ุชููุฆุฉ ุงููุธุงู (ุชู ุจุงููุนู โ)
```bash
python init_permissions.py
```

ูุฐุง ุงูุณูุฑูุจุช ูุงู ุจู:
- ุฅุถุงูุฉ 71 ุตูุงุญูุฉ ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุฅูุดุงุก 10 ุฃุฏูุงุฑ ุงูุชุฑุงุถูุฉ
- ุฑุจุท ุงูุตูุงุญูุงุช ุจุงูุฃุฏูุงุฑ

### 2. ุฅูุดุงุก ูุณุชุฎุฏู ุฌุฏูุฏ

#### ูู ูุงุฌูุฉ ุงูููุจ:
1. ุณุฌู ุงูุฏุฎูู ูู **admin**
2. ุงุฐูุจ ุฅูู **ุงูุฅุนุฏุงุฏุงุช** > **ุงููุณุชุฎุฏููู**
3. ุงุถุบุท ุนูู **ุฅุถุงูุฉ ูุณุชุฎุฏู**
4. ุงููุฃ ุงูุจูุงูุงุช ูุงุฎุชุฑ **ุงูุฏูุฑ** ุงูููุงุณุจ
5. ุงุญูุธ

#### ูู ุณุทุฑ ุงูุฃูุงูุฑ:
```python
from app import create_app, db
from app.models import User, Role

app = create_app()
with app.app_context():
    # ุฅูุดุงุก ูุณุชุฎุฏู ุฌุฏูุฏ
    user = User(
        username='sales_user',
        email='sales@example.com',
        full_name='ููุธู ุงููุจูุนุงุช',
        is_active=True
    )
    user.set_password('password123')
    
    # ุชุนููู ุฏูุฑ
    role = Role.query.filter_by(name='sales_employee').first()
    user.role = role
    
    db.session.add(user)
    db.session.commit()
    print(f"ุชู ุฅูุดุงุก ุงููุณุชุฎุฏู: {user.username}")
```

### 3. ุชุนุฏูู ุตูุงุญูุงุช ุฏูุฑ ูุนูู

#### ูู ูุงุฌูุฉ ุงูููุจ:
1. ุณุฌู ุงูุฏุฎูู ูู **admin**
2. ุงุฐูุจ ุฅูู **ุงูุฅุนุฏุงุฏุงุช** > **ุงูุฃุฏูุงุฑ**
3. ุงุฎุชุฑ ุงูุฏูุฑ ุงููุฑุงุฏ ุชุนุฏููู
4. ุญุฏุฏ/ุฃูุบู ุชุญุฏูุฏ ุงูุตูุงุญูุงุช
5. ุงุญูุธ

#### ูู ุณุทุฑ ุงูุฃูุงูุฑ:
```python
from app import create_app, db
from app.models import Role, Permission, RolePermission

app = create_app()
with app.app_context():
    # ุงูุญุตูู ุนูู ุงูุฏูุฑ
    role = Role.query.filter_by(name='sales_employee').first()
    
    # ุฅุถุงูุฉ ุตูุงุญูุฉ ุฌุฏูุฏุฉ
    permission = Permission.query.filter_by(name='sales.quotations').first()
    
    # ุงูุชุญูู ูู ุนุฏู ูุฌูุฏ ุงูุตูุงุญูุฉ ูุณุจูุงู
    existing = RolePermission.query.filter_by(
        role_id=role.id,
        permission_id=permission.id
    ).first()
    
    if not existing:
        role_permission = RolePermission(
            role_id=role.id,
            permission_id=permission.id
        )
        db.session.add(role_permission)
        db.session.commit()
        print(f"ุชู ุฅุถุงูุฉ ุตูุงุญูุฉ {permission.name} ุฅูู ุฏูุฑ {role.name}")
```

## ๐ ุงูุฃุฏูุงุฑ ุงููุชุงุญุฉ

| ุงูุฏูุฑ | ุงููุตู | ุงูุตูุงุญูุงุช ุงูุฑุฆูุณูุฉ |
|------|------|-------------------|
| **admin** | ูุฏูุฑ ุงููุธุงู | ุฌููุน ุงูุตูุงุญูุงุช |
| **manager** | ูุฏูุฑ ุนุงู | ูุนุธู ุงูุตูุงุญูุงุช (ุนุฏุง ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู) |
| **sales_manager** | ูุฏูุฑ ูุจูุนุงุช | ุงููุจูุนุงุชุ ุงูุนููุงุกุ ุนุฑูุถ ุงูุฃุณุนุงุฑ |
| **sales_employee** | ููุธู ูุจูุนุงุช | ุนุฑุถ ูุฅุถุงูุฉ ุงููุจูุนุงุช ููุท |
| **purchases_manager** | ูุฏูุฑ ูุดุชุฑูุงุช | ุงููุดุชุฑูุงุชุ ุงูููุฑุฏูู |
| **inventory_manager** | ูุฏูุฑ ูุฎุฒูู | ุงููุฎุฒููุ ุงูููุชุฌุงุชุ ุงููุณุชูุฏุนุงุช |
| **accountant** | ูุญุงุณุจ | ุงููุญุงุณุจุฉุ ุงูุชูุงุฑูุฑ ุงููุงููุฉ |
| **cashier** | ุฃููู ุตูุฏูู | ููุงุท ุงูุจูุนุ ุงูุตูุฏูู |
| **hr_manager** | ูุฏูุฑ ููุงุฑุฏ ุจุดุฑูุฉ | ุงูููุธูููุ ุงูุฑูุงุชุจุ ุงูุญุถูุฑ |
| **viewer** | ูุดุงูุฏ | ุนุฑุถ ุงูุจูุงูุงุช ููุท (ุจุฏูู ุชุนุฏูู) |

## ๐ ุฃูุซูุฉ ุนูู ุงูุตูุงุญูุงุช

### ุตูุงุญูุงุช ุงููุจูุนุงุช
- `sales.view` - ุนุฑุถ ููุงุชูุฑ ุงููุจูุนุงุช
- `sales.create` - ุฅุถุงูุฉ ูุงุชูุฑุฉ ูุจูุนุงุช
- `sales.edit` - ุชุนุฏูู ูุงุชูุฑุฉ ูุจูุนุงุช
- `sales.delete` - ุญุฐู ูุงุชูุฑุฉ ูุจูุนุงุช
- `sales.complete` - ุฅุชูุงู ุนูููุฉ ุงูุจูุน
- `sales.cancel` - ุฅูุบุงุก ูุงุชูุฑุฉ ูุจูุนุงุช
- `sales.quotations` - ุฅุฏุงุฑุฉ ุนุฑูุถ ุงูุฃุณุนุงุฑ

### ุตูุงุญูุงุช ุงููุฎุฒูู
- `inventory.view` - ุนุฑุถ ุงููุฎุฒูู
- `inventory.products.view` - ุนุฑุถ ุงูููุชุฌุงุช
- `inventory.products.create` - ุฅุถุงูุฉ ููุชุฌ
- `inventory.products.edit` - ุชุนุฏูู ููุชุฌ
- `inventory.products.delete` - ุญุฐู ููุชุฌ
- `inventory.stock.transfer` - ููู ุงููุฎุฒูู

### ุตูุงุญูุงุช ุงูุฅุนุฏุงุฏุงุช
- `settings.view` - ุนุฑุถ ุงูุฅุนุฏุงุฏุงุช
- `settings.company` - ุฅุนุฏุงุฏุงุช ุงูุดุฑูุฉ
- `settings.users.view` - ุนุฑุถ ุงููุณุชุฎุฏููู
- `settings.users.manage` - ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
- `settings.roles.view` - ุนุฑุถ ุงูุฃุฏูุงุฑ
- `settings.roles.manage` - ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ

## ๐งช ุงุฎุชุจุงุฑ ุงููุธุงู

### ุณููุงุฑูู 1: ููุธู ูุจูุนุงุช
```
ุงููุณุชุฎุฏู: sales_user
ุงูุฏูุฑ: sales_employee
ุงูุตูุงุญูุงุช:
โ ููููู ุนุฑุถ ููุงุชูุฑ ุงููุจูุนุงุช
โ ููููู ุฅุถุงูุฉ ูุงุชูุฑุฉ ูุจูุนุงุช ุฌุฏูุฏุฉ
โ ููููู ุนุฑุถ ุงูุนููุงุก
โ ูุง ููููู ุญุฐู ููุงุชูุฑ
โ ูุง ููููู ุงููุตูู ุฅูู ุงูุฅุนุฏุงุฏุงุช
โ ูุง ููููู ุนุฑุถ ุงููุดุชุฑูุงุช
```

### ุณููุงุฑูู 2: ูุฏูุฑ ูุฎุฒูู
```
ุงููุณุชุฎุฏู: inventory_user
ุงูุฏูุฑ: inventory_manager
ุงูุตูุงุญูุงุช:
โ ููููู ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช
โ ููููู ุฅุฏุงุฑุฉ ุงููุณุชูุฏุนุงุช
โ ููููู ููู ุงููุฎุฒูู
โ ููููู ุนุฑุถ ุงูุชูุงุฑูุฑ
โ ูุง ููููู ุงููุตูู ุฅูู ุงููุจูุนุงุช
โ ูุง ููููู ุงููุตูู ุฅูู ุงูุฅุนุฏุงุฏุงุช
```

### ุณููุงุฑูู 3: ูุดุงูุฏ
```
ุงููุณุชุฎุฏู: viewer_user
ุงูุฏูุฑ: viewer
ุงูุตูุงุญูุงุช:
โ ููููู ุนุฑุถ ุฌููุน ุงูุจูุงูุงุช
โ ูุง ููููู ุฅุถุงูุฉ ุฃู ุชุนุฏูู ุฃู ุญุฐู ุฃู ุจูุงูุงุช
```

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ุงููุณุชุฎุฏู ูุง ูุฑู ุงูููุงุฆู
**ุงูุญู:**
1. ุชุฃูุฏ ูู ุฃู ุงููุณุชุฎุฏู ูุฏูู ุฏูุฑ ูุนูู
2. ุชุฃูุฏ ูู ุฃู ุงูุฏูุฑ ูุฏูู ุงูุตูุงุญูุงุช ุงููุทููุจุฉ
3. ุชุญูู ูู ุฃู `has_permission()` ุชุนูู ุจุดูู ุตุญูุญ

### ุงููุดููุฉ: ุฎุทุฃ 403 ุนูุฏ ุงููุตูู ุฅูู ุตูุญุฉ
**ุงูุญู:**
1. ุชุญูู ูู ุฃู ุงููุณุชุฎุฏู ูุฏูู ุงูุตูุงุญูุฉ ุงููุทููุจุฉ
2. ุชุญูู ูู ุฃู decorator `@permission_required` ูุทุจู ุจุดูู ุตุญูุญ
3. ุฑุงุฌุน ุณุฌูุงุช ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: Admin ูุง ูุฑู ุจุนุถ ุงูุตูุญุงุช
**ุงูุญู:**
- ุงููุณุชุฎุฏููู ุงูุฐูู `is_admin=True` ูุฏููู ุฌููุน ุงูุตูุงุญูุงุช ุชููุงุฆูุงู
- ุชุฃูุฏ ูู ุฃู `is_admin=True` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ๐ ููุงุญุธุงุช ูููุฉ

1. **Admin ุฏุงุฆูุงู ูุฏูู ุตูุงุญูุงุช**: ุงููุณุชุฎุฏููู ุงูุฐูู `is_admin=True` ูุฏููู ุฌููุน ุงูุตูุงุญูุงุช ุชููุงุฆูุงู
2. **ุงูุชุฑุชูุจ ููู**: ูุฌุจ ุฃู ูููู `@login_required` ูุจู `@permission_required`
3. **ุงูุชุฎุฒูู ุงููุคูุช**: ุงูุตูุงุญูุงุช ูุชู ุชุญููููุง ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู
4. **ุงูุฃูุงู**: ูุง ุชุนุทู ุตูุงุญูุงุช ุฃูุซุฑ ูู ุงููุงุฒู

